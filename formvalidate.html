<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Form Validation</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    padding: 20px;
  }

  form {
    background: white;
    padding: 20px;
    border-radius: 8px;
    max-width: 400px;
    margin: auto;
  }

  label {
    font-weight: bold;
    margin-top: 10px;
    display: block;
  }

  input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border: 2px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 1em;
  }

  /* Valid and invalid states */
  input:valid {
    border-color: green;
  }

  input:invalid {
    border-color: red;
  }

  .error {
    color: red;
    font-size: 0.9em;
    margin-bottom: 8px;
    display: none;
  }

  .error.active {
    display: block;
  }

  button {
    margin-top: 15px;
    padding: 10px;
    background: #0077cc;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    font-size: 1em;
  }

  button:hover {
    background: #005fa3;
  }
</style>
</head>
<body>

<form id="myForm" novalidate>
  <label for="email">Email:</label>
  <input type="email" id="email" required>
  <div class="error" id="emailError"></div>

  <label for="country">Country:</label>
  <input type="text" id="country" required>
  <div class="error" id="countryError"></div>

  <label for="postal">Postal Code:</label>
  <input type="text" id="postal" required>
  <div class="error" id="postalError"></div>

  <label for="password">Password:</label>
  <input type="password" id="password" required minlength="6">
  <div class="error" id="passwordError"></div>

  <label for="confirmPassword">Confirm Password:</label>
  <input type="password" id="confirmPassword" required>
  <div class="error" id="confirmPasswordError"></div>

  <button type="submit">Submit</button>
</form>

<script>
const form = document.getElementById("myForm");

const email = document.getElementById("email");
const country = document.getElementById("country");
const postal = document.getElementById("postal");
const password = document.getElementById("password");
const confirmPassword = document.getElementById("confirmPassword");

const emailError = document.getElementById("emailError");
const countryError = document.getElementById("countryError");
const postalError = document.getElementById("postalError");
const passwordError = document.getElementById("passwordError");
const confirmPasswordError = document.getElementById("confirmPasswordError");

// Regex for postal code (basic - adjust for your needs)
const postalRegex = /^[0-9]{5,6}$/;

// Validation functions
function validateEmail() {
  if (!email.value) {
    emailError.textContent = "Email is required.";
    emailError.classList.add("active");
    return false;
  } else if (!email.validity.valid) {
    emailError.textContent = "Please enter a valid email address.";
    emailError.classList.add("active");
    return false;
  }
  emailError.classList.remove("active");
  return true;
}

function validateCountry() {
  if (!country.value.trim()) {
    countryError.textContent = "Country is required.";
    countryError.classList.add("active");
    return false;
  }
  countryError.classList.remove("active");
  return true;
}

function validatePostal() {
  if (!postal.value) {
    postalError.textContent = "Postal code is required.";
    postalError.classList.add("active");
    return false;
  } else if (!postalRegex.test(postal.value)) {
    postalError.textContent = "Postal code must be 5 or 6 digits.";
    postalError.classList.add("active");
    return false;
  }
  postalError.classList.remove("active");
  return true;
}

function validatePassword() {
  if (!password.value) {
    passwordError.textContent = "Password is required.";
    passwordError.classList.add("active");
    return false;
  } else if (password.value.length < 6) {
    passwordError.textContent = "Password must be at least 6 characters.";
    passwordError.classList.add("active");
    return false;
  }
  passwordError.classList.remove("active");
  return true;
}

function validateConfirmPassword() {
  if (!confirmPassword.value) {
    confirmPasswordError.textContent = "Please confirm your password.";
    confirmPasswordError.classList.add("active");
    return false;
  } else if (confirmPassword.value !== password.value) {
    confirmPasswordError.textContent = "Passwords do not match.";
    confirmPasswordError.classList.add("active");
    return false;
  }
  confirmPasswordError.classList.remove("active");
  return true;
}

// Live validation as you type
email.addEventListener("input", validateEmail);
country.addEventListener("input", validateCountry);
postal.addEventListener("input", validatePostal);
password.addEventListener("input", validatePassword);
confirmPassword.addEventListener("input", validateConfirmPassword);

// Validate on blur (when leaving field)
email.addEventListener("blur", validateEmail);
country.addEventListener("blur", validateCountry);
postal.addEventListener("blur", validatePostal);
password.addEventListener("blur", validatePassword);
confirmPassword.addEventListener("blur", validateConfirmPassword);

// Form submit check
form.addEventListener("submit", (e) => {
  e.preventDefault();

  let valid = true;
  if (!validateEmail()) valid = false;
  if (!validateCountry()) valid = false;
  if (!validatePostal()) valid = false;
  if (!validatePassword()) valid = false;
  if (!validateConfirmPassword()) valid = false;

  if (valid) {
    alert("ðŸ™Œ High five! Form submitted successfully!");
    form.reset();
  } else {
    alert("Please fix the errors before submitting.");
  }
});
</script>
</body>
</html>
